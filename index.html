<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Spelling Bee</title>
<style>
:root{
  --bg1:#ffecd2;
  --bg2:#a1c4fd;
  --accent:#ff8c42;
  --accent-2:#ffd166;
  --good:#2e7d32;
  --bad:#d32f2f;
}

body {
  font-family: "Comic Sans MS", "Comic Neue", cursive, sans-serif;
  height: 100vh;
  margin: 0;
  color: #333;
  display: grid;
  place-items: center;
  overflow: hidden;
  background: linear-gradient(120deg, var(--bg1), var(--bg2));
  background-size: 200% 200%;
  animation: bgMove 12s ease-in-out infinite;
}
@keyframes bgMove { 0% {background-position:0% 50%} 50% {background-position:100% 50%} 100% {background-position:0% 50%} }

.card{
  width: min(92vw, 520px);
  text-align: center;
  background: rgba(255,255,255,.92);
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,.2);
  padding: 22px 20px 26px;
  position: relative;
}
.topbar{ display:flex; gap:8px; align-items:center; justify-content:center; flex-wrap:wrap; }
select, button, input{
  font-size: 18px; border-radius: 10px; border: 2px solid var(--accent-2);
  padding: 10px 12px; background: #fff8dc;
}
button{ cursor:pointer; background:#4caf50; color:#fff; border: none; box-shadow: 0 3px 0 #2e7d32; }

.bee-container{ margin-top: 14px; display:none; }
.input-row{ display:flex; gap:8px; justify-content:center; align-items:center; flex-wrap:wrap; }
#answer{ width: min(80vw, 320px); text-align:center; }

.feedback{ font-size: 1.4rem; font-weight: 800; min-height: 1.8em; margin-top: 8px; }
.feedback.yay{ color: var(--good); }
.feedback.try-again{ color: var(--bad); }

.stats{ margin-top:10px; font-size: 1rem; display:flex; gap:12px; justify-content:center; }
.pill{ background:#fff3cd; border:1px solid #ffe08a; border-radius: 999px; padding: 6px 10px; }

canvas#confetti{ position: fixed; inset: 0; pointer-events:none; }

.bee{
  position: fixed;
  width: 40px;
  height: 40px;
  background: yellow;
  border-radius: 50%;
  top: 50%;
  left: -50px;
  pointer-events: none;
  z-index: 999;
  box-shadow: 0 0 8px #ffa500;
}
</style>
</head>
<body>
<div class="card" id="app">
  <h1>Spelling Bee üêù</h1>
  <div class="topbar">
    <select id="gradeSel" aria-label="Select Grade">
      <option value="">Select Grade</option>
    </select>
    <button id="startBtn">Start</button>
    <button id="replayBtn">üîä Repeat Word</button>
  </div>

  <div class="bee-container" id="beeContainer">
    <div class="input-row">
      <input id="answer" placeholder="Type spelling..." autocomplete="off" />
      <button id="submitBtn">Submit</button>
    </div>
    <div class="feedback" id="feedback" aria-live="polite"></div>
    <div class="stats">
      <span class="pill">Correct: <strong id="correct">0</strong></span>
      <span class="pill">Streak: <strong id="streak">0</strong></span>
      <span class="pill">High Score: <strong id="highScore">0</strong></span>
    </div>
  </div>
</div>

<audio id="bgMusic" loop src="https://cdn.pixabay.com/download/audio/2024/04/21/audio_36b773587a.mp3?filename=gentle-happy-kids-background-music-205892.mp3"></audio>
<audio id="correctSound" src="https://cdn.pixabay.com/download/audio/2023/04/20/audio_8825c1b298.mp3?filename=kids-cheer-146777.mp3"></audio>
<audio id="wrongSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6dbed99bfc.mp3?filename=cartoon-fail-trumpet-146419.mp3"></audio>
<audio id="boomSound" src="https://cdn.pixabay.com/download/audio/2021/10/30/audio_0e3b4a8fb3.mp3?filename=explosion-6055.mp3"></audio>
<canvas id="confetti"></canvas>
<div class="bee" id="bee"></div>

<script>
// -------- Words --------
const WORDS = {
  1: ["cat","dog","sun","hat","red","book","fish","car","run","jump"],
  2: ["apple","banana","orange","grape","cherry","school","chair","bread","house","water"],
  3: ["elephant","giraffe","dolphin","kangaroo","penguin","computer","pencil","garden","planet","rocket"],
  4: ["package","activity","festive","attitude","dwell","elephant","alligator",
      "shelf","measure","nonsense","meant","enter","special","edit","began",
      "ramp","absence","except","anteater","eggplant"],
  5: ["extraordinary","environment","imagination","universe","adventure","knowledge","volunteer","exploration","community","responsibility"]
};

// -------- DOM --------
const gradeSel = document.getElementById('gradeSel');
const beeContainer = document.getElementById('beeContainer');
const answerEl = document.getElementById('answer');
const feedbackEl = document.getElementById('feedback');
const correctEl = document.getElementById('correct');
const streakEl = document.getElementById('streak');
const highScoreEl = document.getElementById('highScore');
const startBtn = document.getElementById('startBtn');
const replayBtn = document.getElementById('replayBtn');
const bgMusic = document.getElementById('bgMusic');
const correctSound = document.getElementById('correctSound');
const wrongSound = document.getElementById('wrongSound');
const boomSound = document.getElementById('boomSound');
const beeEl = document.getElementById('bee');

bgMusic.volume = 0.35; correctSound.volume=0.8; wrongSound.volume=0.8; boomSound.volume=0.9;

// -------- State --------
let state = { words: [], poolIndex:0, reviewQueue:[], current:'', correct:0, streak:0, started:false };

// -------- Utils --------
function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }
function speak(text){ if(!('speechSynthesis' in window)) return; window.speechSynthesis.cancel(); window.speechSynthesis.speak(new SpeechSynthesisUtterance(text)); }

function getNextWord(){
  if(state.reviewQueue.length) return state.reviewQueue.shift();
  if(state.poolIndex<state.words.length) return state.words[state.poolIndex++];
  return null;
}

function nextWord(){
  const nxt = getNextWord();
  if(!nxt){
    feedbackEl.textContent="üéâ All words done! Great job!";
    feedbackEl.className='feedback yay';
    startConfetti();
    animateBee();
    return;
  }
  state.current = nxt;
  speak(state.current);
  answerEl.value='';
  feedbackEl.textContent='';
  feedbackEl.className='feedback';
  answerEl.focus();
}

// -------- Populate Grades --------
Object.keys(WORDS).forEach(g=>{
  const opt = document.createElement('option');
  opt.value=g;
  opt.textContent=`Grade ${g}`;
  gradeSel.appendChild(opt);
});

// -------- Game Control --------
function startGame(){
  const grade = gradeSel.value;
  if(!grade){ alert('Please pick a grade'); return; }
  state.started = true;
  state.words = shuffle([...WORDS[grade]]);
  state.poolIndex = 0;
  state.reviewQueue = [];
  state.correct = 0;
  state.streak = 0;

  correctEl.textContent = state.correct;
  streakEl.textContent = state.streak;
  highScoreEl.textContent = localStorage.getItem('highScore')||0;

  beeContainer.style.display='block';
  bgMusic.play().catch(()=>{});
  nextWord();
}
startBtn.addEventListener('click', startGame);
replayBtn.addEventListener('click',()=>{ if(state.current) speak(state.current); });

// -------- Submit --------
function handleSubmit(){
  const userWord = answerEl.value.trim();
  if(!userWord || !state.current) return;

  if(userWord.toLowerCase() === state.current.toLowerCase()){
    feedbackEl.textContent = 'Yay! üéâ';
    feedbackEl.className='feedback yay';
    correctSound.currentTime=0; correctSound.play().catch(()=>{});
    state.correct++;
    state.streak++;
    correctEl.textContent = state.correct;
    streakEl.textContent = state.streak;

    let highScore = parseInt(localStorage.getItem('highScore')||0);
    if(state.correct>highScore){ localStorage.setItem('highScore',state.correct); highScoreEl.textContent = state.correct; }

    // Celebrate every 5
    if(state.streak>0 && state.streak%5===0){ celebrate(); }

    nextWord();
  }else{
    feedbackEl.textContent = 'Try again! ‚ùå';
    feedbackEl.className='feedback try-again';
    wrongSound.currentTime=0; wrongSound.play().catch(()=>{});
    if(!state.reviewQueue.includes(state.current)) state.reviewQueue.push(state.current);
    state.streak = 0;
    streakEl.textContent = state.streak;
    setTimeout(()=>speak(state.current),500);
  }
}
document.getElementById('submitBtn').addEventListener('click', handleSubmit);
answerEl.addEventListener('keydown', e=>{ if(e.key==='Enter') handleSubmit(); });

// -------- Confetti --------
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');
let confettiParticles = [];
function resizeCanvas(){ canvas.width=innerWidth; canvas.height=innerHeight; }
addEventListener('resize', resizeCanvas); resizeCanvas();
function startConfetti(){
  confettiParticles = [];
  for(let i=0;i<140;i++){
    confettiParticles.push({ x:Math.random()*canvas.width, y:-20-Math.random()*canvas.height, r:Math.random()*6+2, d:Math.random()*0.7+0.6, color:`hsl(${Math.random()*360},100%,50%)` });
  }
  requestAnimationFrame(drawConfetti);
  setTimeout(()=>confettiParticles=[],2000);
}
function drawConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(const p of confettiParticles){
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle = p.color;
    ctx.fill();
    p.y += p.d*4;
  }
  if(confettiParticles.length) requestAnimationFrame(drawConfetti);
}

// -------- Bee Animation --------
function animateBee(){
  beeEl.style.transition = 'none';
  beeEl.style.left = '-50px';
  beeEl.style.top = (Math.random()*50 + 25) + '%';
  setTimeout(()=>{
    beeEl.style.transition = 'left 2s ease-in-out, top 2s ease-in-out';
    beeEl.style.left = '110%';
    beeEl.style.top = (Math.random()*50 + 25) + '%';
  },50);
  setTimeout(()=>{ beeEl.style.left='-50px'; }, 2500);
}

// -------- Celebrate --------
function celebrate(){ boomSound.currentTime=0; boomSound.play().catch(()=>{}); startConfetti(); animateBee(); }
</script>
</body>
</html>









